<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Abner</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-05-26T03:09:25.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Abner</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>关于Hexo站点搭建</title>
    <link href="http://yoursite.com/2017/05/26/%E5%85%B3%E4%BA%8EHexo%E7%AB%99%E7%82%B9%E6%90%AD%E5%BB%BA/"/>
    <id>http://yoursite.com/2017/05/26/关于Hexo站点搭建/</id>
    <published>2017-05-26T03:09:25.000Z</published>
    <updated>2017-05-26T03:09:25.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>最近想整理下自己工作这几年的积累，于是买域名建站【😄】<em>未完待续</em></p>
</blockquote>
<h3 id="Hexo-安装"><a href="#Hexo-安装" class="headerlink" title="Hexo 安装:"></a>Hexo 安装:</h3><p><strong><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">Hexo</a> 有两份配置文件，_config.yml，一份位于站点跟目录(站点配置文件)，一份位于主题文件夹下(主题配置文件):</strong></p>
<h4 id="1-NodeJS-安装-升级"><a href="#1-NodeJS-安装-升级" class="headerlink" title="1. NodeJS 安装(升级)"></a>1. NodeJS 安装(升级)</h4><h4 id="2-利用-npm-命令安装"><a href="#2-利用-npm-命令安装" class="headerlink" title="2. 利用 npm 命令安装:"></a>2. <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">利用 npm 命令安装</a>:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$npm install -g hero-cli</div></pre></td></tr></table></figure>
<h4 id="3-建站"><a href="#3-建站" class="headerlink" title="3. 建站:"></a>3. 建站:</h4><p><strong>1) 新建站点</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo init &lt;folder&gt;</div><div class="line">$ cd &lt;folder&gt;</div><div class="line">$ npm install</div></pre></td></tr></table></figure></p>
<p><strong>2) 指令</strong></p>
<table>
<thead>
<tr>
<th>指令</th>
<th style="text-align:right">参数</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>$hexo init <folder></folder></td>
<td style="text-align:right"></td>
<td style="text-align:center">新建一个网站，如果没有文件夹，默认在当前目录下新建完网站</td>
</tr>
<tr>
<td>$hexo new [layout] <title></title></td>
<td style="text-align:right"></td>
<td style="text-align:center">新建一篇文章，如没有layout参数，则使用_config.yml中default_layout参数替代；标题含有空格的话使用双引号括起来</td>
</tr>
<tr>
<td>$hexo generate</td>
<td style="text-align:right">-d, —dealoy [文件生成后立即部署] \ -w, —watch [监视文件变动]</td>
<td style="text-align:center">生成静态文件，可简写为 hexo g</td>
</tr>
<tr>
<td>$hexo publish [layout] <filename></filename></td>
<td style="text-align:right"></td>
<td style="text-align:center">发表草稿</td>
</tr>
<tr>
<td>$hexo server</td>
<td style="text-align:right">-p, —port [重设端口] \ -s, —static [只是用静态文件] \ -l, —log [启用日记记录，使用覆盖记录格式]</td>
<td style="text-align:center">启动服务器，可简写为 hexo s, 默认网址：<a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a></td>
</tr>
<tr>
<td>$hexo deploy</td>
<td style="text-align:right">-g, —generate [部署之前预先生成静态文件]</td>
<td style="text-align:center">部署网站，可简写为 hexo d</td>
</tr>
<tr>
<td>$hexo clean</td>
<td style="text-align:right"></td>
<td style="text-align:center">清除缓存和已生成的静态文件，当对站点更改不生效的时候可使用此命令</td>
</tr>
</tbody>
</table>
<blockquote>
<p>其他参考官网：<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="external">https://hexo.io/zh-cn/docs/commands.html</a></p>
</blockquote>
<h3 id="Next-主题安装："><a href="#Next-主题安装：" class="headerlink" title="Next 主题安装："></a>Next 主题安装：</h3><blockquote>
<p>可选主题 <a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">https://github.com/hexojs/hexo/wiki/Themes</a><br><strong>Hexo 安装主题只需要将主题文件拷贝至站点目录下的 themes 文件夹下，然后修改配置文件即可。</strong></p>
</blockquote>
<h4 id="1-克隆最新版本："><a href="#1-克隆最新版本：" class="headerlink" title="1. 克隆最新版本："></a>1. 克隆最新版本：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$cd site_folder</div><div class="line">$git clone https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure>
<h4 id="2-启用主题"><a href="#2-启用主题" class="headerlink" title="2. 启用主题"></a>2. 启用主题</h4><p>打开站点配置文件，找到 theme 字段，将其值改为 next</p>
<h4 id="3-主题设置"><a href="#3-主题设置" class="headerlink" title="3. 主题设置"></a>3. 主题设置</h4><p>打开主题配置文件，查找相应字段<br><strong>1）scheme</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Muse</div><div class="line">Mist</div><div class="line">Pisces</div></pre></td></tr></table></figure></p>
<p><strong>2）auto_excerpt(首页自动摘录)</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># Automatically Excerpt. Not recommend.</div><div class="line"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</div><div class="line">  auto_excerpt:</div><div class="line">  enable: true</div><div class="line">  length: 150</div></pre></td></tr></table></figure></p>
<h4 id="4-其他"><a href="#4-其他" class="headerlink" title="4. 其他"></a>4. 其他</h4><p><strong>1）添加RSS:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">a、安装插件，执行： $npm install hexo-generator-feed --save</div><div class="line">b、添加配置，在站点配置文件中添加如下配置</div><div class="line">    #RSS订阅</div><div class="line">    plugin:</div><div class="line">    - hexo-generator-feed</div><div class="line">    #Feed Atom</div><div class="line">    feed:</div><div class="line">    type: atom</div><div class="line">    path: atom.xml</div><div class="line">    limit: 20</div><div class="line">c、在主题配置文件中添加如下配置</div><div class="line">    # Set rss to false to disable feed link.</div><div class="line">    # Leave rss as empty to use site&apos;s feed link.</div><div class="line">    # Set rss to specific value if you have burned your feed already.</div><div class="line">    rss: /atom.xml</div></pre></td></tr></table></figure></p>
<p><strong>2）添加搜索引擎验证(百度+Google):</strong><br><em>利用 Github 与 Hexo 搭建的站点是不会被搜索引擎搜索到的，需要我们手动将站点提交给搜索引擎并通过验证</em><br>以下通过 HTML meta 标签验证的方式添加；在主题文件中按照目录查找 <code>themes/next/layout/_partials/head.swig</code> ，默认 head 文件中有提供了模板，修改其中content值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;% if theme.google_site_verification %&#125;</div><div class="line">  &lt;meta name=&quot;google-site-verification&quot; content=&quot;xxx&quot; /&gt;</div><div class="line">&#123;% endif %&#125;</div><div class="line"></div><div class="line">&#123;% if theme.baidu_site_verification %&#125;</div><div class="line">  &lt;meta name=&quot;baidu-site-verification&quot; content=&quot;xxx&quot; /&gt;</div><div class="line">&#123;% endif %&#125;</div></pre></td></tr></table></figure></p>
<p>同时在主题配置文件中设置 <code>google-site-verification</code> 与 <code>baidu-site-verification</code> 的值为 ture.<br><code>(如没有自行添加)</code><br>引擎验证申请地址：<code>(百度验证完要漫长的等待...)</code><br><a href="http://zhanzhang.baidu.com/linksubmit/url" target="_blank" rel="external"><em>百度申请</em></a><br><a href="https://www.google.com/webmasters/tools/home?hl=zh-CN" target="_blank" rel="external"><em>Google申请</em></a></p>
<p><strong>3）添加评论(Gitment:利用 Github Issues 搭建评论)[^2]:</strong></p>
<ul>
<li>a、Github 注册 OAuth Application <a href="https://github.com/settings/applications/new" target="_blank" rel="external">点击此处注册一个新的 OAuth Application</a><br>注册时其他选项可以随便填，但要确保填入正确的 callback URL（一般是评论页面对应的域名，如 <a href="http://justabner.com)，记录" target="_blank" rel="external">http://justabner.com)，记录</a> client id 以及 client secret 值.</li>
<li>b、添加代码到页面中（这版用起来比较麻烦，等待作者后续更新）</li>
</ul>
<p><strong>4）添加评论(利用<a href="http://changyan.kuaizhan.com/" target="_blank" rel="external">畅言</a>搭建评论):</strong></p>
<ul>
<li>a、注册畅言账号，注册的时候需要填网站域名跟备案，可以先随便在找一家网站填上去，等待审核通过后再修改成自己的域名</li>
<li>b、点击进入后台，“后台总览”中查看 APP ID 与 APP KEY</li>
<li>c、老版 Next 主题需要手动自己添加，参考 <a href="http://www.zhaiqianfeng.com/2017/03/changyan-for-hexo-next-theme.html" target="_blank" rel="external"><em>宅前疯</em> 这篇博客</a></li>
<li>d、新版(本站2017.06更新)打开主题配置文件，找到 chanyan，修改 enable 为 ture，分别添加 appid 跟 appkey 两个值</li>
<li>e、编译并部署</li>
<li>f、确保每篇文章开头部分front-matter 中添加了 comments: true，否则看不到评论，可以直接更改文章模板；畅言的主题可以在畅言后台设置：<code>畅言后台管理-系统设置-PC版设置-主题样式</code></li>
</ul>
<p><strong>5）添加搜索功能[^3]</strong></p>
<ul>
<li><p>a、生成博客的索引数据，Hexo 可以通过下面的插件生成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-generator-search --save</div></pre></td></tr></table></figure>
</li>
<li><p>b、在站点配置文件中添加如下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">search:</div><div class="line">  path: search.xml #file path. Default is search.xml .#</div><div class="line">  field: post #(Default) - will only covers all the posts of your blog.#</div><div class="line">         page #will only covers all the pages of your blog.#</div><div class="line">         all  #will covers all the posts and pages of your blog.#</div></pre></td></tr></table></figure>
<p><em>更多配置说明可到插件页面查看：<a href="https://github.com/PaicHyperionDev/hexo-generator-search" target="_blank" rel="external">hexo-generator-search</a></em></p>
</li>
<li>c、主题配置文件中设置 local_search 的 enable 的值为 ture</li>
<li>d、部署站点，如果遇到问题尝试下执行清除缓存命令</li>
</ul>
<h3 id="站点部署："><a href="#站点部署：" class="headerlink" title="站点部署："></a>站点部署：</h3><p><strong>部署到 Github 上，对外访问。</strong></p>
<h4 id="1-建立-Repository"><a href="#1-建立-Repository" class="headerlink" title="1. 建立 Repository:"></a>1. 建立 Repository:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">1）github 上建立远程仓库，your_name.github.io</div><div class="line">2）设置站点配置文件</div><div class="line">    deploy:</div><div class="line">    type: git</div><div class="line">    repo: https://github.com/AbnerSun/AbnerSun.github.io.git</div><div class="line">    branch: master</div><div class="line">3）GitHub Pages 绑定来自阿里云的域名[^1]</div><div class="line">    ① 在站点的 source 目录下创建 CNAME(标题大写，没有后缀) 文件，添加域名保存部署（直接添加域名，没有 http:// 打头，eg.：justabner.com）;  Github读取CNAME之后，Github服务器会设置 justabner.com为主域名，然后将 abnersun.github.io 重定向到justabner.com</div><div class="line">    ② 登陆阿里域名控制台，在域名解析中添加解析</div><div class="line">        A记录 ：@ ：192.30.252.145</div><div class="line">        A记录 ：@ ：192.30.252.153</div><div class="line">        CNAME ：www : abnersun.github.io</div></pre></td></tr></table></figure>
<h4 id="2-部署步骤："><a href="#2-部署步骤：" class="headerlink" title="2. 部署步骤："></a>2. 部署步骤：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$hexo clean</div><div class="line">$hexo generate</div><div class="line">$hexo deploy</div><div class="line"></div><div class="line">后两步可简写为：$hexo d -g</div></pre></td></tr></table></figure>
<h3 id="写博文"><a href="#写博文" class="headerlink" title="写博文:"></a>写博文:</h3><h4 id="1-文章头格式"><a href="#1-文章头格式" class="headerlink" title="1. 文章头格式"></a>1. 文章头格式</h4><ul>
<li><p>头格式支持 YAML 以及 JSON 两种格式;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">YAML:</div><div class="line">    title: Hello World</div><div class="line">    date: 2013/7/13 20:46:25</div><div class="line">    ---</div><div class="line"></div><div class="line">JSON:</div><div class="line">    &quot;title&quot;: &quot;Hello World&quot;,</div><div class="line">    &quot;date&quot;: &quot;2013/7/13 20:46:25&quot;</div><div class="line">    ;;;</div></pre></td></tr></table></figure>
</li>
<li><p>文章头格式默认值：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">Setting</th>
<th style="text-align:left">Description</th>
<th style="text-align:center">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">layout</td>
<td style="text-align:left">Layout</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">title</td>
<td style="text-align:left">Title</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">date</td>
<td style="text-align:left">Published date</td>
<td style="text-align:center">File created date</td>
</tr>
<tr>
<td style="text-align:left">updated</td>
<td style="text-align:left">Updated date</td>
<td style="text-align:center">File updated date</td>
</tr>
<tr>
<td style="text-align:left">comments</td>
<td style="text-align:left">Enables comment feature for the post</td>
<td style="text-align:center">true</td>
</tr>
<tr>
<td style="text-align:left">tags</td>
<td style="text-align:left">Tags (Not available for pages)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">categories</td>
<td style="text-align:left">Categories (Not available for pages)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">permalink</td>
<td style="text-align:left">Overrides the default permalink of the post</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>未完待续</strong></p>
</blockquote>
<p>[^1]: 参考 <a href="http://bamzc.top/2016/11/29/github-pages-custom-domain" target="_blank" rel="external">http://bamzc.top/2016/11/29/github-pages-custom-domain</a><br>[^2]: 参考 <a href="https://github.com/imsun/gitment" target="_blank" rel="external">https://github.com/imsun/gitment</a><br>[^3]: 参考 <a href="https://zetaoyang.github.io/post/2016/07/08/hexo-localsearch.html" target="_blank" rel="external">https://zetaoyang.github.io/post/2016/07/08/hexo-localsearch.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近想整理下自己工作这几年的积累，于是买域名建站【😄】&lt;em&gt;未完待续&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Hexo-安装&quot;&gt;&lt;a href=&quot;#Hexo-安装&quot; class=&quot;headerlink&quot; title=&quot;He
    
    </summary>
    
      <category term="Blog" scheme="http://yoursite.com/categories/Blog/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
      <category term="Web" scheme="http://yoursite.com/tags/Web/"/>
    
  </entry>
  
</feed>
